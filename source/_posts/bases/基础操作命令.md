---
title: kubernetes基础操作命令
date: 2022-02-11 12:19:35
author: James
img: https://buleye.oss-cn-shenzhen.aliyuncs.com/images/202202111107079.png
cover: true
coverImg: https://buleye.oss-cn-shenzhen.aliyuncs.com/images/202201121153157.png
toc: true
summary:  
categories: kubernetes
tags:
  - kubernetes
---

## 操作命令

### 集群信息

```
kubectl cluster-info
```

### `namespace`

- 查看`<namespace>`

```
kubectl get ns
```

### 节点信息

- 查看节点

```
kubectl get nodes
```

- 查看节点信息

```
kubectl get node -o wide 
```

- 查看节点CPU和内存占用

```
kubectl top node 
```

- 查看节点详细信息

```
kubectl describe node <NODENAME>
```

### `POD`

- 查看指定`namespace`下的`pod`

```
kubectl get pod -n <NAMESPACE>
```

- 通过`label`查看pod

```
kubectl get pod -n rook-ceph -l app=rook-ceph-osd
```

### 查看日志

- 直接查看日志

```
kubectl log -f -n <NAMESPACE> <PODNAME>
```

- 查看重启前日志

```
kubectl log -f -n <NAMESPACE> <PODNAME> -p 
```

- 查看指定容器日志

```
kubectl log -f -n <NAMESPACE> <PODNAME> -c <CONTAINER NAME>
```

### 编辑

- 直接编辑yaml

```
kubectl edit <对像类型> <对像名称>
```

### 删除

- 普通删除

```
kubectl delete <对像类型> <对像名称>
```
- 强制删除

```
kubectl delete <对像类型> <对像名称> --force --
```

### SVC

- 查看`svc`

```
kubectl get svc
```

- 暴露对外访问

```
kubectl expose <DEPLOYMENT/STATEFULSET> <NAME> --name=<SVCNAME> --port=<LOCAL PORT> --target-port=<REMOTE PORT>
```

### `YAML`

- 根据`yaml`创建

```
kubectl create -f /path/yaml/file
```

- 根据`yaml`更新

```
kubectl apply -f /path/yaml/file
```

- 根据`yaml`删除

```
kubectl delete -f /path/yaml/file
```

### **下线节点**

```
kubectl cordon <node-name>
kubectl drain <node-name> --ignore-daemonsets
kubectl delete node <node-name>
对该节点进行 reset
手动修改主机hosts移除对应机器解析记录
```